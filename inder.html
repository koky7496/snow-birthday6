<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday Mehak! üíñ</title>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>

    <style>
        :root {
            --primary: #ff9a9e;
            --secondary: #fad0c4;
            --accent: #ffecd2;
            --text: #5d4037;
            --glow: rgba(255, 255, 255, 0.8);
            --gold: #ffd700;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #fff1eb 0%, #ace0f9 100%);
            min-height: 100vh;
            overflow-x: hidden;
            color: var(--text);
            scroll-behavior: smooth;
        }

        /* --- Animations --- */
        @keyframes float {
            0% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-15px);
            }

            100% {
                transform: translateY(0px);
            }
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(255, 154, 158, 0.7);
            }

            70% {
                transform: scale(1.05);
                box-shadow: 0 0 0 10px rgba(255, 154, 158, 0);
            }

            100% {
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(255, 154, 158, 0);
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes candleFlicker {

            0%,
            100% {
                opacity: 1;
                transform: scale(1);
            }

            50% {
                opacity: 0.8;
                transform: scale(0.9, 1.1);
            }
        }

        @keyframes popIn {
            0% {
                transform: scale(0);
                opacity: 0;
            }

            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        /* --- Intro Screen --- */
        #intro-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom right, #ff9a9e, #fecfef);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 1s ease-out;
        }

        .intro-text {
            font-size: 3rem;
            color: white;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 2rem;
            text-align: center;
            animation: float 3s ease-in-out infinite;
        }

        .start-btn {
            padding: 15px 40px;
            font-size: 1.2rem;
            background: white;
            color: var(--primary);
            border: none;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            animation: pulse 2s infinite;
            transition: transform 0.3s;
        }

        .start-btn:active {
            transform: scale(0.95);
        }

        /* --- Main Content --- */
        #main-content {
            display: none;
            opacity: 0;
            transition: opacity 1s ease-in;
            padding-bottom: 50px;
        }

        section {
            min-height: 80vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            text-align: center;
        }

        /* --- Cake Section --- */
        .cake-container {
            position: relative;
            margin-top: 50px;
            animation: fadeIn 1.5s ease-out;
        }

        /* CSS Cake */
        .cake {
            position: relative;
            width: 250px;
            height: 200px;
            margin: 0 auto;
        }

        .plate {
            width: 270px;
            height: 10px;
            background: #ddd;
            border-radius: 10px;
            position: absolute;
            bottom: 0;
            left: -10px;
        }

        .layer {
            position: absolute;
            background: #fad0c4;
            border-radius: 10px 10px 0 0;
            left: 50%;
            transform: translateX(-50%);
        }

        .layer-bottom {
            width: 250px;
            height: 80px;
            bottom: 10px;
            border-bottom: 5px solid #e8b6aa;
        }

        .layer-middle {
            width: 200px;
            height: 70px;
            bottom: 90px;
            background: #ff9a9e;
            border-bottom: 5px solid #e6858a;
        }

        .layer-top {
            width: 150px;
            height: 60px;
            bottom: 160px;
            background: #fad0c4;
            border-bottom: 5px solid #e8b6aa;
        }

        .frosting {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 15px;
            background: #fff;
            border-radius: 10px 10px 10px 10px;
        }

        .candle {
            position: absolute;
            width: 10px;
            height: 35px;
            background: linear-gradient(to bottom, #fff, #ccc);
            bottom: 220px;
            left: 50%;
            transform: translateX(-50%);
            border-radius: 2px;
        }

        .flame {
            position: absolute;
            width: 12px;
            height: 18px;
            background: #ffcc00;
            border-radius: 50% 50% 20% 20%;
            top: -20px;
            left: -1px;
            box-shadow: 0 0 10px #ffcc00, 0 0 20px #ff6600;
            animation: candleFlicker 0.1s infinite alternate;
        }

        /* --- Message Section --- */
        .message-box {
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(10px);
            padding: 40px;
            border-radius: 20px;
            max-width: 600px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
            margin: 20px;
            border: 2px solid white;
        }

        .typewriter {
            font-size: 1.2rem;
            line-height: 1.8;
            color: #555;
            min-height: 100px;
        }

        /* --- Gallery Section --- */
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            width: 100%;
            max-width: 800px;
            padding: 20px;
        }

        .photo-frame {
            background: white;
            padding: 10px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s;
            aspect-ratio: 1/1;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .photo-frame:hover {
            transform: translateY(-10px) rotate(2deg);
        }

        .placeholder-text {
            color: #ccc;
            font-size: 0.9rem;
            text-align: center;
            border: 2px dashed #ff9a9e;
            width: 100%;
            height: 100%;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        /* --- Wish Box Section --- */
        .wish-section {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            max-width: 500px;
            width: 90%;
            margin-top: 20px;
        }

        .input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        #wish-input {
            flex: 1;
            padding: 10px 15px;
            border: 2px solid var(--secondary);
            border-radius: 25px;
            outline: none;
            transition: border-color 0.3s;
        }

        #wish-input:focus {
            border-color: var(--primary);
        }

        .add-wish-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .add-wish-btn:active {
            transform: scale(0.9);
        }

        .wish-list {
            text-align: left;
            max-height: 200px;
            overflow-y: auto;
        }

        .wish-card {
            background: #fff0f5;
            padding: 10px 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            font-size: 0.9rem;
            color: #555;
            border-left: 4px solid var(--primary);
        }

        /* --- Rating Section --- */
        .rating-container {
            font-size: 2.5rem;
            color: #ddd;
            cursor: pointer;
            margin: 20px 0;
        }

        .star {
            transition: color 0.2s;
        }

        .star.active {
            color: var(--gold);
        }

        .rating-text {
            font-size: 1.1rem;
            color: var(--primary);
            min-height: 30px;
            font-weight: bold;
        }

        /* --- Do You Love Me Section --- */
        .love-buttons {
            display: flex;
            gap: 30px;
            margin-top: 30px;
            position: relative;
            height: 60px;
            /* Space for buttons */
            width: 100%;
            justify-content: center;
        }

        .btn-love {
            padding: 12px 30px;
            font-size: 1.2rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            transition: all 0.3s;
        }

        .btn-yes {
            background: #ff4d6d;
            color: white;
        }

        .btn-no {
            background: #e0e0e0;
            color: #555;
            position: relative;
            /* Starts relative, becomes absolute when running */
        }

        .love-response {
            margin-top: 20px;
            font-size: 1.5rem;
            color: #d63384;
            font-weight: bold;
            opacity: 0;
            transition: opacity 0.5s;
        }

        /* --- Final Section --- */
        .heart-btn {
            font-size: 4rem;
            background: none;
            border: none;
            cursor: pointer;
            transition: transform 0.2s;
            margin-top: 20px;
        }

        .heart-btn:active {
            transform: scale(0.8);
        }

        /* Music Control */
        .music-control {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.8);
            padding: 10px;
            border-radius: 50%;
            cursor: pointer;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        /* Confetti Canvas */
        #confetti-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 999;
        }

        h2 {
            font-size: 2.5rem;
            color: #d66d75;
            margin-bottom: 20px;
        }

        @media (max-width: 600px) {
            .intro-text {
                font-size: 2rem;
            }

            .cake {
                transform: scale(0.8);
            }

            h2 {
                font-size: 2rem;
            }

            .love-buttons {
                gap: 15px;
            }
        }
    </style>
</head>

<body>

    <div id="intro-screen">
        <h1 class="intro-text">Happy Birthday<br>Mehak üíñ</h1>
        <button class="start-btn" onclick="startCelebration()">Tap to Start ‚ú®</button>
    </div>

    <audio id="bg-music" loop>
    </audio>

    <canvas id="confetti-canvas"></canvas>

    <div id="main-content">

        <section id="celebration">
            <h2>Make a Wish, Mehak! üéÇ</h2>
            <div class="cake-container">
                <div class="cake">
                    <div class="plate"></div>
                    <div class="layer layer-bottom"></div>
                    <div class="layer layer-middle"></div>
                    <div class="layer layer-top"></div>
                    <div class="frosting" style="top: 160px; width: 250px;"></div>
                    <div class="frosting" style="top: 90px; width: 200px;"></div>
                    <div class="frosting" style="top: 20px; width: 150px;"></div>
                    <div class="candle">
                        <div class="flame"></div>
                    </div>
                </div>
            </div>
            <p style="margin-top: 30px; font-size: 1.2rem; color: #777;">üéà May all your dreams come true! üéà</p>
        </section>

        <section id="wish-box-section">
            <h2>Mehak's Wish Box ‚ú®</h2>
            <div class="wish-section">
                <div class="input-group">
                    <input type="text" id="wish-input" placeholder="Type a wish for yourself...">
                    <button class="add-wish-btn" onclick="addWish()">Add ‚ú®</button>
                </div>
                <div class="wish-list" id="wish-list">
                </div>
            </div>
        </section>

        <section id="message">
            <div class="message-box">
                <h2>A Note for Mehak üíå</h2>
                <p id="typewriter-text" class="typewriter"></p>
            </div>
        </section>

        <section id="rating-section">
            <h2>Rate this Surprise? ‚≠ê</h2>
            <div class="rating-container">
                <span class="star" onclick="rate(1)">‚òÖ</span>
                <span class="star" onclick="rate(2)">‚òÖ</span>
                <span class="star" onclick="rate(3)">‚òÖ</span>
                <span class="star" onclick="rate(4)">‚òÖ</span>
                <span class="star" onclick="rate(5)">‚òÖ</span>
            </div>
            <div id="rating-text" class="rating-text"></div>
        </section>

        <section id="love-check">
            <h2>Do you love me? üíï</h2>
            <div class="love-buttons">
                <button class="btn-love btn-yes" onclick="sayYes()">YES üòç</button>
                <button class="btn-love btn-no" id="no-btn">NO üôÑ</button>
            </div>
            <div id="love-response" class="love-response">I knew it! Love you too Mehak! üòòüíñ</div>
        </section>

        <section id="gallery">
            <h2>Memories with Mehak ‚ú®</h2>
            <div class="gallery-grid">
                <div class="photo-frame">
                    <div class="placeholder-text">
                        <span>üì∑</span>
                        <br>Mehak being cute
                    </div>
                </div>
                <div class="photo-frame">
                    <div class="placeholder-text">
                        <span>ü•∞</span>
                        <br>Our best day
                    </div>
                </div>
                <div class="photo-frame">
                    <div class="placeholder-text">
                        <span>üíÉ</span>
                        <br>Mehak's Style
                    </div>
                </div>
                <div class="photo-frame">
                    <div class="placeholder-text">
                        <span>üíñ</span>
                        <br>Precious Moment
                    </div>
                </div>
            </div>
        </section>

        <section id="closing">
            <h2>You are Special, Mehak üíï</h2>
            <p>Every day with you is a gift.</p>
            <button class="heart-btn" onclick="explodeHearts()">üíñ</button>
            <p style="font-size: 0.9rem; margin-top: 20px; color: #999;">(Tap the heart!)</p>
        </section>

    </div>

    <div class="music-control" onclick="toggleMusic()">üéµ</div>

    <script>
        // --- Firebase Configuration & Initialization ---
        const firebaseConfig = {
            apiKey: "AIzaSyDXMZFiyUy5clth9qfm13wNbL9EOS61t2Y",
            authDomain: "snow-birthday-2.firebaseapp.com",
            projectId: "snow-birthday-2",
            storageBucket: "snow-birthday-2.firebasestorage.app",
            messagingSenderId: "1037215535742",
            appId: "1:1037215535742:web:048763960f091dbdcc7e2f"
        };
        
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        // You can now access firebase services, e.g., const db = firebase.database();

        // --- Configuration ---
        const message = "Happy Birthday Mehak! üéâ On your special day, I just want to remind you how incredibly beautiful, kind, and smart you are. You light up every room you walk into. Mehak, may this year bring you as much happiness as you bring to everyone around you. Keep shining! ‚ú®";

        // --- State ---
        let audioPlaying = false;
        const introScreen = document.getElementById('intro-screen');
        const mainContent = document.getElementById('main-content');
        const music = document.getElementById('bg-music');

        // --- Functions ---

        function startCelebration() {
            introScreen.style.opacity = '0';
            setTimeout(() => {
                introScreen.style.display = 'none';
                mainContent.style.display = 'block';
                setTimeout(() => {
                    mainContent.style.opacity = '1';
                    startConfetti();
                    typeWriter();
                    try {
                        // music.play(); // Uncomment if file exists
                        audioPlaying = true;
                    } catch (e) { console.log("Audio file missing or blocked"); }
                }, 50);
            }, 1000);
        }

        function toggleMusic() {
            if (audioPlaying) {
                music.pause();
                audioPlaying = false;
            } else {
                music.play().catch(e => alert("Please add an audio file to the HTML code!"));
                audioPlaying = true;
            }
        }

        // --- Typewriter Effect ---
        let i = 0;
        function typeWriter() {
            if (i < message.length) {
                document.getElementById("typewriter-text").innerHTML += message.charAt(i);
                i++;
                setTimeout(typeWriter, 50);
            }
        }

        // --- Wish Box Logic ---
        function addWish() {
            const input = document.getElementById('wish-input');
            const list = document.getElementById('wish-list');
            const text = input.value.trim();

            if (text) {
                // TODO: Save 'text' to Firebase here!
                const wishCard = document.createElement('div');
                wishCard.className = 'wish-card';
                wishCard.innerText = `‚ú® ${text}`;
                list.prepend(wishCard); // Add to top
                input.value = '';
            }
        }

        // --- Rating Logic ---
        function rate(stars) {
            const allStars = document.querySelectorAll('.star');
            const textField = document.getElementById('rating-text');

            allStars.forEach((star, index) => {
                if (index < stars) {
                    star.classList.add('active');
                } else {
                    star.classList.remove('active');
                }
            });

            textField.innerText = `Mehak rated this ${stars}/5 üíñ`;
            explodeHearts(); // Bonus effect on rating
        }

        // --- Runaway Button Logic ---
        const noBtn = document.getElementById('no-btn');

        const moveButton = () => {
            const x = Math.random() * (window.innerWidth - 100);
            const y = Math.random() * (window.innerHeight - 50);
            noBtn.style.position = 'fixed'; // Use fixed to allow movement anywhere
            noBtn.style.left = `${x}px`;
            noBtn.style.top = `${y}px`;
        };

        noBtn.addEventListener('mouseenter', moveButton);
        noBtn.addEventListener('touchstart', (e) => {
            e.preventDefault(); // Prevent clicking
            moveButton();
        });

        function sayYes() {
            document.getElementById('love-response').style.opacity = '1';
            explodeHearts();
            // Optional: Launch extra confetti
            for (let k = 0; k < 5; k++) setTimeout(explodeHearts, k * 300);
        }

        // --- Heart Explosion Logic ---
        function explodeHearts() {
            const centerX = window.innerWidth / 2;
            const centerY = window.innerHeight / 2;

            for (let i = 0; i < 30; i++) {
                const heart = document.createElement('div');
                heart.innerHTML = ['üíñ', 'üíï', 'üå∏', '‚ú®'][Math.floor(Math.random() * 4)];
                heart.style.position = 'fixed';
                heart.style.left = centerX + 'px';
                heart.style.top = centerY + 'px';
                heart.style.fontSize = (Math.random() * 20 + 10) + 'px';
                heart.style.pointerEvents = 'none';
                heart.style.transition = 'all 1s ease-out';
                heart.style.zIndex = '1000';

                document.body.appendChild(heart);

                const angle = Math.random() * Math.PI * 2;
                const velocity = Math.random() * 150 + 50;
                const tx = Math.cos(angle) * velocity;
                const ty = Math.sin(angle) * velocity;

                setTimeout(() => {
                    heart.style.transform = `translate(${tx}px, ${ty}px) scale(0)`;
                    heart.style.opacity = '0';
                }, 10);

                setTimeout(() => {
                    heart.remove();
                }, 1000);
            }
        }

        // --- Confetti System ---
        const canvas = document.getElementById("confetti-canvas");
        const ctx = canvas.getContext("2d");
        let particles = [];

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        function startConfetti() {
            for (let i = 0; i < 100; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height - canvas.height,
                    size: Math.random() * 10 + 5,
                    color: `hsl(${Math.random() * 360}, 100%, 70%)`,
                    speedY: Math.random() * 3 + 2,
                    speedX: Math.random() * 2 - 1,
                    rotation: Math.random() * 360,
                    rotationSpeed: Math.random() * 5 - 2.5
                });
            }
            animateConfetti();
        }

        function animateConfetti() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            particles.forEach((p, index) => {
                p.y += p.speedY;
                p.x += Math.sin(p.y / 50) * 2;
                p.rotation += p.rotationSpeed;

                if (p.y > canvas.height) {
                    p.y = -10;
                    p.x = Math.random() * canvas.width;
                }

                ctx.save();
                ctx.translate(p.x, p.y);
                ctx.rotate(p.rotation * Math.PI / 180);
                ctx.fillStyle = p.color;
                ctx.fillRect(-p.size / 2, -p.size / 2, p.size, p.size);
                ctx.restore();
            });

            requestAnimationFrame(animateConfetti);
        }
    </script>
</body>

</html>
